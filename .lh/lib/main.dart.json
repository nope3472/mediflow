{
    "sourceFile": "lib/main.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 22,
            "patches": [
                {
                    "date": 1744486143611,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1744486165795,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:firebase_core/firebase_core.dart';\r\n-import 'login_page.dart';\r\n+import 'package:medi_flow_new/login.dart';\r\n \r\n+\r\n void main() async {\r\n   WidgetsFlutterBinding.ensureInitialized();\r\n   await Firebase.initializeApp(); // Make sure firebase_options.dart is configured if using FlutterFire CLI\r\n \r\n"
                },
                {
                    "date": 1744487105504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,12 @@\n import 'package:flutter/material.dart';\r\n import 'package:firebase_core/firebase_core.dart';\r\n import 'package:medi_flow_new/login.dart';\r\n+import 'package:medi_flow_new/firebase_options.dart';\r\n \r\n-\r\n void main() async {\r\n   WidgetsFlutterBinding.ensureInitialized();\r\n-  await Firebase.initializeApp(); // Make sure firebase_options.dart is configured if using FlutterFire CLI\r\n+  await Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);\r\n \r\n   runApp(const MediFlowApp());\r\n }\r\n \r\n"
                },
                {
                    "date": 1744487742479,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,29 +1,28 @@\n-import 'package:flutter/material.dart';\r\n-import 'package:firebase_core/firebase_core.dart';\r\n-import 'package:medi_flow_new/login.dart';\r\n-import 'package:medi_flow_new/firebase_options.dart';\r\n-\r\n-void main() async {\r\n-  WidgetsFlutterBinding.ensureInitialized();\r\n-  await Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);\r\n-\r\n-  runApp(const MediFlowApp());\r\n-}\r\n-\r\n-class MediFlowApp extends StatelessWidget {\r\n-  const MediFlowApp({super.key});\r\n-\r\n-  @override\r\n-  Widget build(BuildContext context) {\r\n-    return MaterialApp(\r\n-      title: 'MediFlow',\r\n-      debugShowCheckedModeBanner: false,\r\n-      theme: ThemeData(\r\n-        primarySwatch: Colors.teal,\r\n-        scaffoldBackgroundColor: Colors.white,\r\n-        visualDensity: VisualDensity.adaptivePlatformDensity,\r\n-      ),\r\n-      home: LoginPage(),\r\n-    );\r\n-  }\r\n-}\r\n+import 'package:flutter/material.dart';\n+import 'package:firebase_core/firebase_core.dart';\n+import 'package:medi_flow_new/login.dart';\n+\n+void main() async {\n+  WidgetsFlutterBinding.ensureInitialized();\n+  await Firebase.initializeApp(); // Make sure firebase_options.dart is configured if using FlutterFire CLI\n+\n+  runApp(const MediFlowApp());\n+}\n+\n+class MediFlowApp extends StatelessWidget {\n+  const MediFlowApp({super.key});\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    return MaterialApp(\n+      title: 'MediFlow',\n+      debugShowCheckedModeBanner: false,\n+      theme: ThemeData(\n+        primarySwatch: Colors.teal,\n+        scaffoldBackgroundColor: Colors.white,\n+        visualDensity: VisualDensity.adaptivePlatformDensity,\n+      ),\n+      home: LoginPage(),\n+    );\n+  }\n+}\n"
                },
                {
                    "date": 1744488572646,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,16 @@\n import 'package:flutter/material.dart';\n import 'package:firebase_core/firebase_core.dart';\n-import 'package:medi_flow_new/login.dart';\n+import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:shared_preferences/shared_preferences.dart';\n \n+import 'screens/login_screen.dart';\n+import 'screens/onboarding_screen.dart';\n+import 'screens/home_page.dart';\n+\n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n-  await Firebase.initializeApp(); // Make sure firebase_options.dart is configured if using FlutterFire CLI\n-\n+  await Firebase.initializeApp();\n   runApp(const MediFlowApp());\n }\n \n class MediFlowApp extends StatelessWidget {\n@@ -16,13 +20,49 @@\n   Widget build(BuildContext context) {\n     return MaterialApp(\n       title: 'MediFlow',\n       debugShowCheckedModeBanner: false,\n-      theme: ThemeData(\n-        primarySwatch: Colors.teal,\n-        scaffoldBackgroundColor: Colors.white,\n-        visualDensity: VisualDensity.adaptivePlatformDensity,\n-      ),\n-      home: LoginPage(),\n+      routes: {\n+        '/home': (context) => const HomePage(),\n+        '/onboarding': (context) => const OnboardingScreen(),\n+      },\n+      home: const AuthWrapper(),\n     );\n   }\n }\n+\n+class AuthWrapper extends StatefulWidget {\n+  const AuthWrapper({super.key});\n+\n+  @override\n+  State<AuthWrapper> createState() => _AuthWrapperState();\n+}\n+\n+class _AuthWrapperState extends State<AuthWrapper> {\n+  bool? isFirstTime;\n+\n+  @override\n+  void initState() {\n+    super.initState();\n+    checkFirstTime();\n+  }\n+\n+  Future<void> checkFirstTime() async {\n+    final prefs = await SharedPreferences.getInstance();\n+    final onboardingDone = prefs.getBool(\"onboarding_done\") ?? false;\n+    setState(() {\n+      isFirstTime = !onboardingDone;\n+    });\n+  }\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    final user = FirebaseAuth.instance.currentUser;\n+    if (user == null) return const LoginScreen();\n+\n+    if (isFirstTime == null) {\n+      return const Scaffold(body: Center(child: CircularProgressIndicator()));\n+    }\n+\n+    return isFirstTime! ? const OnboardingScreen() : const HomePage();\n+  }\n+}\n"
                },
                {
                    "date": 1744488584452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,8 @@\n import 'package:flutter/material.dart';\n import 'package:firebase_core/firebase_core.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n-import 'package:shared_preferences/shared_preferences.dart';\n \n-import 'screens/login_screen.dart';\n-import 'screens/onboarding_screen.dart';\n-import 'screens/home_page.dart';\n \n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n   await Firebase.initializeApp();\n"
                },
                {
                    "date": 1744488590908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,9 @@\n import 'package:flutter/material.dart';\n import 'package:firebase_core/firebase_core.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:medi_flow_new/home_page.dart';\n+import 'package:medi_flow_new/onboarding_screen.dart';\n \n \n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n"
                },
                {
                    "date": 1744488611580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,9 @@\n \n   @override\n   Widget build(BuildContext context) {\n     final user = FirebaseAuth.instance.currentUser;\n-    if (user == null) return const LoginScreen();\n+    if (user == null) return const LoginPage();\n \n     if (isFirstTime == null) {\n       return const Scaffold(body: Center(child: CircularProgressIndicator()));\n     }\n"
                },
                {
                    "date": 1744488618806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,13 @@\n import 'package:flutter/material.dart';\n import 'package:firebase_core/firebase_core.dart';\n-import 'package:firebase_auth/firebase_auth.dart';\n-import 'package:medi_flow_new/home_page.dart';\n-import 'package:medi_flow_new/onboarding_screen.dart';\n+import 'package:medi_flow_new/login.dart';\n \n \n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n-  await Firebase.initializeApp();\n+  await Firebase.initializeApp(); // Make sure firebase_options.dart is configured if using FlutterFire CLI\n+\n   runApp(const MediFlowApp());\n }\n \n class MediFlowApp extends StatelessWidget {\n@@ -18,49 +17,13 @@\n   Widget build(BuildContext context) {\n     return MaterialApp(\n       title: 'MediFlow',\n       debugShowCheckedModeBanner: false,\n-      routes: {\n-        '/home': (context) => const HomePage(),\n-        '/onboarding': (context) => const OnboardingScreen(),\n-      },\n-      home: const AuthWrapper(),\n+      theme: ThemeData(\n+        primarySwatch: Colors.teal,\n+        scaffoldBackgroundColor: Colors.white,\n+        visualDensity: VisualDensity.adaptivePlatformDensity,\n+      ),\n+      home: LoginPage(),\n     );\n   }\n }\n-\n-class AuthWrapper extends StatefulWidget {\n-  const AuthWrapper({super.key});\n-\n-  @override\n-  State<AuthWrapper> createState() => _AuthWrapperState();\n-}\n-\n-class _AuthWrapperState extends State<AuthWrapper> {\n-  bool? isFirstTime;\n-\n-  @override\n-  void initState() {\n-    super.initState();\n-    checkFirstTime();\n-  }\n-\n-  Future<void> checkFirstTime() async {\n-    final prefs = await SharedPreferences.getInstance();\n-    final onboardingDone = prefs.getBool(\"onboarding_done\") ?? false;\n-    setState(() {\n-      isFirstTime = !onboardingDone;\n-    });\n-  }\n-\n-  @override\n-  Widget build(BuildContext context) {\n-    final user = FirebaseAuth.instance.currentUser;\n-    if (user == null) return const LoginPage();\n-\n-    if (isFirstTime == null) {\n-      return const Scaffold(body: Center(child: CircularProgressIndicator()));\n-    }\n-\n-    return isFirstTime! ? const OnboardingScreen() : const HomePage();\n-  }\n-}\n"
                },
                {
                    "date": 1744488657788,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,15 @@\n import 'package:flutter/material.dart';\n import 'package:firebase_core/firebase_core.dart';\n+import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:shared_preferences/shared_preferences.dart';\n import 'package:medi_flow_new/login.dart';\n+import 'package:medi_flow_new/onboarding_screen.dart';\n+import 'package:medi_flow_new/home_screen.dart'; // Create this screen if not done yet\n \n-\n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n-  await Firebase.initializeApp(); // Make sure firebase_options.dart is configured if using FlutterFire CLI\n-\n+  await Firebase.initializeApp();\n   runApp(const MediFlowApp());\n }\n \n class MediFlowApp extends StatelessWidget {\n@@ -22,8 +24,53 @@\n         primarySwatch: Colors.teal,\n         scaffoldBackgroundColor: Colors.white,\n         visualDensity: VisualDensity.adaptivePlatformDensity,\n       ),\n-      home: LoginPage(),\n+      home: const EntryPoint(),\n     );\n   }\n }\n+\n+class EntryPoint extends StatefulWidget {\n+  const EntryPoint({super.key});\n+\n+  @override\n+  State<EntryPoint> createState() => _EntryPointState();\n+}\n+\n+class _EntryPointState extends State<EntryPoint> {\n+  Widget? _startScreen;\n+\n+  @override\n+  void initState() {\n+    super.initState();\n+    determineStartScreen();\n+  }\n+\n+  Future<void> determineStartScreen() async {\n+    final user = FirebaseAuth.instance.currentUser;\n+    if (user == null) {\n+      setState(() => _startScreen = const LoginPage());\n+      return;\n+    }\n+\n+    final prefs = await SharedPreferences.getInstance();\n+    bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n+\n+    if (onboardingDone) {\n+      setState(() => _startScreen = const HomeScreen());\n+    } else {\n+      setState(() => _startScreen = const OnboardingScreen());\n+    }\n+  }\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    if (_startScreen == null) {\n+      return const Scaffold(\n+        body: Center(child: CircularProgressIndicator()),\n+      );\n+    } else {\n+      return _startScreen!;\n+    }\n+  }\n+}\n"
                },
                {
                    "date": 1744488666404,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n import 'package:firebase_auth/firebase_auth.dart';\n import 'package:shared_preferences/shared_preferences.dart';\n import 'package:medi_flow_new/login.dart';\n import 'package:medi_flow_new/onboarding_screen.dart';\n-import 'package:medi_flow_new/home_screen.dart'; // Create this screen if not done yet\n+// Create this screen if not done yet\n \n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n   await Firebase.initializeApp();\n"
                },
                {
                    "date": 1744488674433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n import 'package:flutter/material.dart';\n import 'package:firebase_core/firebase_core.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n-import 'package:shared_preferences/shared_preferences.dart';\n import 'package:medi_flow_new/login.dart';\n import 'package:medi_flow_new/onboarding_screen.dart';\n // Create this screen if not done yet\n \n@@ -48,9 +47,9 @@\n \n   Future<void> determineStartScreen() async {\n     final user = FirebaseAuth.instance.currentUser;\n     if (user == null) {\n-      setState(() => _startScreen = const LoginPage());\n+      setState(() => _startScreen =  LoginPage());\n       return;\n     }\n \n     final prefs = await SharedPreferences.getInstance();\n"
                },
                {
                    "date": 1744488694170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import 'package:flutter/material.dart';\n import 'package:firebase_core/firebase_core.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:medi_flow_new/home_page.dart';\n import 'package:medi_flow_new/login.dart';\n import 'package:medi_flow_new/onboarding_screen.dart';\n // Create this screen if not done yet\n \n@@ -55,9 +56,9 @@\n     final prefs = await SharedPreferences.getInstance();\n     bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n \n     if (onboardingDone) {\n-      setState(() => _startScreen = const HomeScreen());\n+      setState(() => _startScreen = const HomePage());\n     } else {\n       setState(() => _startScreen = const OnboardingScreen());\n     }\n   }\n"
                },
                {
                    "date": 1744488743459,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import 'package:firebase_auth/firebase_auth.dart';\n import 'package:medi_flow_new/home_page.dart';\n import 'package:medi_flow_new/login.dart';\n import 'package:medi_flow_new/onboarding_screen.dart';\n+import 'package:shared_preferences/shared_preferences.dart';\n // Create this screen if not done yet\n \n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n"
                },
                {
                    "date": 1744488796396,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,8 @@\n import 'package:medi_flow_new/home_page.dart';\n import 'package:medi_flow_new/login.dart';\n import 'package:medi_flow_new/onboarding_screen.dart';\n import 'package:shared_preferences/shared_preferences.dart';\n-// Create this screen if not done yet\n \n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n   await Firebase.initializeApp();\n"
                },
                {
                    "date": 1744490155433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,14 +55,9 @@\n \n     final prefs = await SharedPreferences.getInstance();\n     bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n \n-    if (onboardingDone) {\n-      setState(() => _startScreen = const HomePage());\n-    } else {\n-      setState(() => _startScreen = const OnboardingScreen());\n-    }\n-  }\n+    \n \n   @override\n   Widget build(BuildContext context) {\n     if (_startScreen == null) {\n"
                },
                {
                    "date": 1744490163230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n \n     final prefs = await SharedPreferences.getInstance();\n     bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n \n-    \n+  }\n \n   @override\n   Widget build(BuildContext context) {\n     if (_startScreen == null) {\n"
                },
                {
                    "date": 1744490168514,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,8 @@\n       return;\n     }\n \n     final prefs = await SharedPreferences.getInstance();\n-    bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n \n   }\n \n   @override\n"
                },
                {
                    "date": 1744490180565,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,11 +2,10 @@\n import 'package:firebase_core/firebase_core.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n import 'package:medi_flow_new/home_page.dart';\n import 'package:medi_flow_new/login.dart';\n-import 'package:medi_flow_new/onboarding_screen.dart';\n-import 'package:shared_preferences/shared_preferences.dart';\n \n+\n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n   await Firebase.initializeApp();\n   runApp(const MediFlowApp());\n@@ -52,10 +51,8 @@\n       setState(() => _startScreen =  LoginPage());\n       return;\n     }\n \n-    final prefs = await SharedPreferences.getInstance();\n-\n   }\n \n   @override\n   Widget build(BuildContext context) {\n"
                },
                {
                    "date": 1744490267303,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,11 @@\n import 'package:firebase_core/firebase_core.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n import 'package:medi_flow_new/home_page.dart';\n import 'package:medi_flow_new/login.dart';\n+import 'package:medi_flow_new/onboarding_screen.dart';\n+import 'package:shared_preferences/shared_preferences.dart';\n \n-\n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n   await Firebase.initializeApp();\n   runApp(const MediFlowApp());\n@@ -51,8 +52,16 @@\n       setState(() => _startScreen =  LoginPage());\n       return;\n     }\n \n+    final prefs = await SharedPreferences.getInstance();\n+    bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n+\n+    if (onboardingDone) {\n+      setState(() => _startScreen = const HomePage());\n+    } else {\n+      setState(() => _startScreen = const OnboardingScreen());\n+    }\n   }\n \n   @override\n   Widget build(BuildContext context) {\n"
                },
                {
                    "date": 1744490294218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import 'package:flutter/material.dart';\n import 'package:firebase_core/firebase_core.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:medi_flow_new/home_dashboard.dart';\n import 'package:medi_flow_new/home_page.dart';\n import 'package:medi_flow_new/login.dart';\n import 'package:medi_flow_new/onboarding_screen.dart';\n import 'package:shared_preferences/shared_preferences.dart';\n@@ -56,9 +57,9 @@\n     final prefs = await SharedPreferences.getInstance();\n     bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n \n     if (onboardingDone) {\n-      setState(() => _startScreen = const HomePage());\n+      setState(() => _startScreen = const HomeDashboard());\n     } else {\n       setState(() => _startScreen = const OnboardingScreen());\n     }\n   }\n"
                },
                {
                    "date": 1744490319338,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,9 @@\n     final prefs = await SharedPreferences.getInstance();\n     bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n \n     if (onboardingDone) {\n-      setState(() => _startScreen = const Home());\n+      setState(() => _startScreen = const HomePage());\n     } else {\n       setState(() => _startScreen = const OnboardingScreen());\n     }\n   }\n"
                },
                {
                    "date": 1744533148200,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n import 'package:medi_flow_new/home_page.dart';\n import 'package:medi_flow_new/login.dart';\n import 'package:medi_flow_new/onboarding_screen.dart';\n import 'package:shared_preferences/shared_preferences.dart';\n+import 'package:medi_flow_new/home_dashboard.dart';\n \n void main() async {\n   WidgetsFlutterBinding.ensureInitialized();\n   await Firebase.initializeApp();\n@@ -48,17 +49,17 @@\n \n   Future<void> determineStartScreen() async {\n     final user = FirebaseAuth.instance.currentUser;\n     if (user == null) {\n-      setState(() => _startScreen =  LoginPage());\n+      setState(() => _startScreen = LoginPage());\n       return;\n     }\n \n     final prefs = await SharedPreferences.getInstance();\n     bool onboardingDone = prefs.getBool('onboarding_done') ?? false;\n \n     if (onboardingDone) {\n-      setState(() => _startScreen = const HomePage());\n+      setState(() => _startScreen = HomeDashboard(userName: user.displayName ?? 'User'));\n     } else {\n       setState(() => _startScreen = const OnboardingScreen());\n     }\n   }\n"
                }
            ],
            "date": 1744486143611,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:firebase_core/firebase_core.dart';\r\nimport 'login_page.dart';\r\n\r\nvoid main() async {\r\n  WidgetsFlutterBinding.ensureInitialized();\r\n  await Firebase.initializeApp(); // Make sure firebase_options.dart is configured if using FlutterFire CLI\r\n\r\n  runApp(const MediFlowApp());\r\n}\r\n\r\nclass MediFlowApp extends StatelessWidget {\r\n  const MediFlowApp({super.key});\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      title: 'MediFlow',\r\n      debugShowCheckedModeBanner: false,\r\n      theme: ThemeData(\r\n        primarySwatch: Colors.teal,\r\n        scaffoldBackgroundColor: Colors.white,\r\n        visualDensity: VisualDensity.adaptivePlatformDensity,\r\n      ),\r\n      home: LoginPage(),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}